<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- If no payment provider is configured we can configure it from website   -->
    <template id="appointment_payment" name="Appointment Payment Providers">
        <t t-set="no_breadcrumbs" t-value="True"/>
        <t t-call="portal.portal_layout">
            <div id="wrap"
                 class="bg-o-color-4 h-100 mt-4 pb-4 px-4 rounded-3 border">
                <t t-set="o_portal_fullwidth_alert"
                   groups="appointment.group_appointment_manager">
                    <t t-call="portal.portal_back_in_edit_mode">
                        <t t-set="backend_url"
                           t-value="'/web#id=%s&amp;view_type=form&amp;model=%s&amp;action=appointment.appointment_type_action' % (appointment_type.id, appointment_type._name)"/>
                        <t t-set="custom_html">This is a preview of the customer
                            appointment payment form.
                        </t>
                    </t>
                </t>
                <div class="oe_structure container o_appointment o_appointment_payment">
                    <t t-set="is_chosen_assign_method"
                       t-value="appointment_type.assign_method != 'time_auto_assign'"/>
                    <t t-set="staff_user" t-value="booking.staff_user_id"/>
                    <div class="d-flex align-items-baseline justify-content-between mt-4">
                        <h4 class="me-2">
                            Payment for
                            <t t-esc="booking.appointment_type_id.name"/>
                        </h4>
                        <a t-att-href="cancel_booking_route"><i
                                class="fa fa-pencil fa-fw me-1"/>Edit my
                            appointment
                        </a>
                    </div>
                    <div t-if="not amount"
                         class="text-center alert alert-info mt-4">
                        There is nothing to pay.
                    </div>
                    <div t-elif="" class="text-center alert alert-warning mt-4">
                        <strong>No suitable payment option could be found.
                        </strong>
                        If you believe that it is an error, please contact the
                        website administrator.
                        <a class="alert-link"
                           t-attf-href="/web#view_type=kanban&amp;model=payment.provider&amp;action=payment.action_payment_provider"
                           groups="base.group_system">
                            <br/>
                            <i class="fa fa-cog me-1" role="img"
                               aria-label="Edit"
                               title="Configure Providers in backend"/>
                            <em>Configure Payment Providers</em>
                        </a>
                        <a type="submit"
                           name="%(payment.action_payment_provider)d"
                           class="btn btn-link ps-0 pb-2"
                           role="button">
                            <i class="oi oi-fw o_button_icon oi-arrow-right"/>
                            Configure Payment
                        </a>
                        <a role="button" groups="base.group_system"
                           class="btn btn-sm btn-link text-white float-end"
                           target="_blank" aria-label="Edit" title="Edit"
                           t-att-href="'/web#model=%s&amp;id=%s&amp;action=%s&amp;view_type=form' % ('payment.provider', payment_tx_id.provider_id.id, 'payment.action_payment_provider')">
                            <i class="fa fa-pencil"/>
                        </a>
                    </div>
                    <div t-elif="not providers and not tokens"
                         class="alert alert-warning">
                        <strong>No suitable payment option could be found.
                        </strong>
                        <br/>
                        <a class="alert-link"
                           t-attf-href="/web#view_type=kanban&amp;model=payment.provider&amp;action=payment.action_payment_provider"
                           groups="base.group_system">
                            <br/>
                            <i class="fa fa-cog me-1" role="img"
                               aria-label="Edit"
                               title="Configure Providers in backend"/>
                            <em>Configure Payment Providers</em>
                        </a>
                        <br/></div>
                    <t t-else="" t-call="payment.checkout"/>
                    <div class="oe_structure"/>
                </div>
            </div>
        </t>
    </template>
</odoo>