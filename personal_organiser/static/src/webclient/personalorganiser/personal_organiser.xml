<?xml version="1.0" encoding="utf-8" ?>
<templates xml:space="preserve">
    <t t-name="personal_organiser.task">
        <div style="margin: 0; padding: 0;">
            <div class="sidebar bg-grey text-white" style="margin: 0; padding: 0; width: 300px;">
                <h2 class="text-center" style="margin: 0;">Tasks</h2>
                <div style="padding: 0;">
                    <input type="text"
                           t-model="state.newTask"
                           class="mt-2 form-control"
                           placeholder="Add a new task"
                           required="True"
                           style="margin: 0; width: 100%;"/>
                    <input type="date"
                           t-model="state.date"
                           class="form-control mt-2"
                           placeholder="Date/time"
                           required="True"
                           style="margin: 0; width: 100%;"/>
                    <button t-on-click="addTask"
                            class="btn btn-primary mt-2"
                            t-att-disabled="!(state.newTask and state.date)"
                            style="width: 100%;">
                        Create
                    </button>
                </div>
                <div>
                    <t t-foreach="state.tasks" t-as="task" t-key="task.id">
                        <div style="padding: 0; margin: 0;">
                            <div class="card"
                                 t-att-style="task_index % 2 === 0 ? 'background-color: #F2F0EF;' : 'background-color: white;'"
                                 style="width: 100%; margin: 0;">
                                <div class="card-body" style="padding: 0;">
                                    <div class="d-flex justify-content-between align-items-start">
                                        <textarea
                                            class="form-control"
                                            t-att-value="task.task_title"
                                            t-on-change="(event) => this.onInputChange(event, task, 'task_title')"
                                            style="margin: 0; width: 100%; white-space: normal; word-wrap: break-word;"
                                        />
                                    </div>
                                    <div class="d-flex justify-content-between align-items-start">
                                        <input type="date"
                                               class="form-control"
                                               t-att-value="task.date"
                                               t-on-change="(event) => this.onInputChange(event, task, 'date')"
                                               style="margin: 0; width: 100%;" />
                                    </div>
                                    <div class="d-flex justify-content-between align-items-end">
                                        <button class="btn btn-sm"
                                                t-on-click="() => this.deleteTask(task)"
                                                style="width: auto;">
                                            <img src="./personal_organiser/static/src/img/bin.png"
                                                 alt="Delete"
                                                 aria-label="Delete"
                                                 style="width: 20px; height: 20px;"/>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </t>
                </div>
            </div>
        </div>
    </t>
</templates>
